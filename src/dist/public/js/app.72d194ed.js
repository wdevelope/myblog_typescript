(function(){"use strict";var t={1943:function(t,e,a){var o=a(9242),r=a(3396);function i(t,e,a,o,i,n){const s=(0,r.up)("BasicHeader"),l=(0,r.up)("el-header"),u=(0,r.up)("BasicAside"),d=(0,r.up)("el-aside"),c=(0,r.up)("router-view"),p=(0,r.up)("el-main"),m=(0,r.up)("el-container");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s)])),_:1}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u)])),_:1}),(0,r.Wm)(m,{class:"main-container"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c)])),_:1})])),_:1})])),_:1})])),_:1})])}const n=t=>((0,r.dD)("data-v-32d6d4b8"),t=t(),(0,r.Cn)(),t),s=n((()=>(0,r._)("h1",null,"w-life daily",-1)));function l(t,e,a,o,i,n){const l=(0,r.up)("router-link"),u=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{to:"/home",class:"custom-router-link"},{default:(0,r.w5)((()=>[s])),_:1}),(0,r._)("div",null,[n.isLoggedIn?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(l,{key:0,to:"/login"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{type:"Login",round:""},{default:(0,r.w5)((()=>[(0,r.Uk)("Login")])),_:1})])),_:1})),n.isLoggedIn?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(l,{key:1,to:"/register"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{type:"Register",round:""},{default:(0,r.w5)((()=>[(0,r.Uk)("Register")])),_:1})])),_:1})),n.isLoggedIn?((0,r.wg)(),(0,r.j4)(l,{key:2,to:"/logout"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{type:"Logout",onClick:n.logout,round:""},{default:(0,r.w5)((()=>[(0,r.Uk)("Logout")])),_:1},8,["onClick"])])),_:1})):(0,r.kq)("",!0),n.isLoggedIn?((0,r.wg)(),(0,r.j4)(l,{key:3,to:"/account"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{type:"Account",round:""},{default:(0,r.w5)((()=>[(0,r.Uk)("Account")])),_:1})])),_:1})):(0,r.kq)("",!0)])],64)}a(560);var u=a(1076),d={name:"BasicHeader",computed:{isLoggedIn(){return this.$store.state.isLoggedIn}},created(){this.checkLoginStatus()},methods:{async checkLoginStatus(){try{if(!this.isLoggedIn())return;await u.Z.get("https://www.w-life.store/api/user/check",{withCredentials:!0}),this.$store.dispatch("login")}catch(t){console.log("미로그인 상태")}},async logout(){try{await u.Z.post("https://www.w-life.store/api/user/logout",{},{withCredentials:!0}),alert("로그아웃 성공!"),this.$store.dispatch("logout"),this.$router.push("/login")}catch(t){console.error("Error during logout",t),alert("로그아웃 실패")}}}},c=a(89);const p=(0,c.Z)(d,[["render",l],["__scopeId","data-v-32d6d4b8"]]);var m=p,g=a(7139);function h(t,e,a,o,i,n){const s=(0,r.up)("HomeFilled"),l=(0,r.up)("el-icon"),u=(0,r.up)("router-link"),d=(0,r.up)("el-menu-item"),c=(0,r.up)("Collection"),p=(0,r.up)("el-menu-item-group"),m=(0,r.up)("el-sub-menu"),h=(0,r.up)("Avatar"),w=(0,r.up)("el-menu"),f=(0,r.up)("el-scrollbar"),y=(0,r.up)("el-aside");return(0,r.wg)(),(0,r.j4)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{"default-openeds":[]},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{index:"home"},{title:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s)])),_:1}),(0,r.Wm)(u,{to:"/home",class:"custom-router-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1})])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.categories,(t=>((0,r.wg)(),(0,r.j4)(m,{key:t.id,index:t.id.toString()},{title:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c)])),_:1}),(0,r.Uk)((0,g.zw)(t.name),1)])),default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.subCategories[t.id],(t=>((0,r.wg)(),(0,r.j4)(p,{key:t.id},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{index:t.id.toString(),onClick:e=>n.goToSubCategoryBoard(t.id)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,g.zw)(t.name),1)])),_:2},1032,["index","onClick"])])),_:2},1024)))),128))])),_:2},1032,["index"])))),128)),(0,r.Wm)(d,{index:"visitor"},{title:(0,r.w5)((()=>[(0,r.Wm)(u,{to:"/visitor",class:"custom-router-link"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h)])),_:1}),(0,r.Uk)("Visitor ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var w={name:"BasicAside",data(){return{categories:[],subCategories:{}}},created(){this.fetchCategories()},methods:{async fetchCategories(){try{const t=await u.Z.get("https://www.w-life.store/api/category");this.categories=t.data.sort(((t,e)=>t.position-e.position)),await this.fetchSubCategories()}catch(t){console.error("Error fetching categories",t)}},async fetchSubCategories(){try{for(let t of this.categories){const e=await u.Z.get(`https://www.w-life.store/api/subCategory/${t.id}`);this.subCategories[t.id]=e.data.sort(((t,e)=>t.position-e.position))}}catch(t){console.error("Error fetching subcategories",t)}},goToSubCategoryBoard(t){this.$router.push(`/subCategory/${t}`)}}};const f=(0,c.Z)(w,[["render",h],["__scopeId","data-v-43721189"]]);var y=f,v={name:"App",components:{BasicHeader:m,BasicAside:y}};const _=(0,c.Z)(v,[["render",i]]);var b=_,C=a(2483);const k=t=>((0,r.dD)("data-v-0c096c54"),t=t(),(0,r.Cn)(),t),P=k((()=>(0,r._)("h2",null,"🏅 w-life 블로그에 오신 것을 환영합니다.",-1))),W=k((()=>(0,r._)("br",null,null,-1))),V=k((()=>(0,r._)("p",null," 본 블로그는 2023년부터 개인적인 일기, 개발일지 등 글쓰기 공간으로 사용할 예정입니다. ",-1))),I=k((()=>(0,r._)("br",null,null,-1))),U=k((()=>(0,r._)("ul",null,[(0,r._)("li",null,[(0,r._)("strong",null,"web:"),(0,r.Uk)(" 웹개발 학습 정리 자료입니다.")]),(0,r._)("li",null,[(0,r._)("strong",null,"server:"),(0,r.Uk)(" 서버 학습 정리 자료입니다.")]),(0,r._)("li",null,[(0,r._)("strong",null,"ioT:"),(0,r.Uk)(" 사물인터넷 학습 정리 자료입니다.")])],-1))),$=k((()=>(0,r._)("br",null,null,-1))),D=k((()=>(0,r._)("ul",null,[(0,r._)("li",null,[(0,r._)("strong",null,"헬스 :"),(0,r.Uk)(" 헬스 일기입니다.")])],-1))),x=k((()=>(0,r._)("br",null,null,-1))),S=k((()=>(0,r._)("ul",null,[(0,r._)("li",null,[(0,r._)("strong",null,"2023 :"),(0,r.Uk)(" 소소한 일기입니다.")])],-1))),Z=k((()=>(0,r._)("br",null,null,-1))),A=k((()=>(0,r._)("ul",null,[(0,r._)("li",null,"블로그 개선 버전관리입니다.")],-1))),q=k((()=>(0,r._)("br",null,null,-1))),z=k((()=>(0,r._)("span",null,"자유로운 방명록 게시판입니다.",-1)));function L(t,e,a,o,i,n){const s=(0,r.up)("ReadingLamp"),l=(0,r.up)("el-icon"),u=(0,r.up)("Ship"),d=(0,r.up)("ChatDotSquare");return(0,r.wg)(),(0,r.iD)("div",null,[P,W,V,I,(0,r._)("h3",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s),(0,r.Uk)(" ")])),_:1}),(0,r.Uk)("study ")]),U,$,(0,r._)("h3",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u),(0,r.Uk)(" ")])),_:1}),(0,r.Uk)("hobby ")]),D,x,(0,r._)("h3",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u),(0,r.Uk)(" ")])),_:1}),(0,r.Uk)("Life ")]),S,Z,(0,r._)("h3",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u),(0,r.Uk)(" ")])),_:1}),(0,r.Uk)("version ")]),A,q,(0,r._)("h3",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d),(0,r.Uk)(" ")])),_:1}),(0,r.Uk)("Visitors ")]),z])}var B={name:"PageHome"};const T=(0,c.Z)(B,[["render",L],["__scopeId","data-v-0c096c54"]]);var M=T;const R=t=>((0,r.dD)("data-v-7dc04696"),t=t(),(0,r.Cn)(),t),j=R((()=>(0,r._)("h1",null,"Login",-1))),H=R((()=>(0,r._)("button",{type:"submit",class:"submit-button"},"Login",-1)));function E(t,e,a,i,n,s){return(0,r.wg)(),(0,r.iD)("form",{onSubmit:e[2]||(e[2]=(0,o.iM)(((...t)=>s.login&&s.login(...t)),["prevent"])),class:"login-form"},[j,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>n.loginInfo.email=t),placeholder:"Email",required:"",class:"input-field"},null,512),[[o.nr,n.loginInfo.email]]),(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>n.loginInfo.password=t),placeholder:"Password",required:"",class:"input-field"},null,512),[[o.nr,n.loginInfo.password]]),H],32)}var O={name:"PageLogin",data(){return{loginInfo:{email:"",password:""}}},methods:{async login(){try{const t=await u.Z.post("https://www.w-life.store/api/user/login",this.loginInfo,{withCredentials:!0});200===t.status?(alert("로그인에 성공했습니다."),this.$store.dispatch("login"),this.$router.push("/home")):alert(t.data.errorMessage||"로그인에 실패했습니다.")}catch(t){alert("로그인이 실패했습니다."),console.error(t,"알 수 없는 에러 발생")}}}};const F=(0,c.Z)(O,[["render",E],["__scopeId","data-v-7dc04696"]]);var N=F;const Y=t=>((0,r.dD)("data-v-04616f48"),t=t(),(0,r.Cn)(),t),K=Y((()=>(0,r._)("h1",null,"Register",-1))),G=Y((()=>(0,r._)("button",{type:"submit",class:"submit-button"},"회원가입",-1)));function J(t,e,a,i,n,s){return(0,r.wg)(),(0,r.iD)("form",{onSubmit:e[4]||(e[4]=(0,o.iM)(((...t)=>s.register&&s.register(...t)),["prevent"]))},[K,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>n.registerInfo.email=t),placeholder:"Email",required:"",class:"input-field"},null,512),[[o.nr,n.registerInfo.email]]),(0,r.wy)((0,r._)("input",{type:"name","onUpdate:modelValue":e[1]||(e[1]=t=>n.registerInfo.name=t),placeholder:"name",required:"",class:"input-field"},null,512),[[o.nr,n.registerInfo.name]]),(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=t=>n.registerInfo.password=t),placeholder:"Password",required:"",class:"input-field"},null,512),[[o.nr,n.registerInfo.password]]),(0,r.wy)((0,r._)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=t=>n.registerInfo.confirmPassword=t),placeholder:"Confirm Password",required:"",class:"input-field"},null,512),[[o.nr,n.registerInfo.confirmPassword]]),G],32)}var Q={name:"PageRegister",data(){return{registerInfo:{email:"",password:"",confirmPassword:"",name:""}}},methods:{async register(){try{const t=await u.Z.post("https://www.w-life.store/api/user/register",this.registerInfo,{withCredentials:!0});201===t.status?(alert("회원가입에 성공했습니다."),this.$router.push("/login")):alert(t.data.errorMessage||"회원가입에 실패했습니다.")}catch(t){alert("회원가입이 실패했습니다."),console.error(t,"알 수 없는 에러 발생")}}}};const X=(0,c.Z)(Q,[["render",J],["__scopeId","data-v-04616f48"]]);var tt=X;const et=t=>((0,r.dD)("data-v-c9a300ce"),t=t(),(0,r.Cn)(),t),at={class:"visitorTitle"},ot=et((()=>(0,r._)("h2",null,"방명록",-1))),rt={key:0},it=["onClick"];function nt(t,e,a,i,n,s){const l=(0,r.up)("el-button"),u=(0,r.up)("el-table-column"),d=(0,r.up)("el-table"),c=(0,r.up)("Pagination");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",at,[ot,(0,r.Wm)(l,{type:"primary",onClick:s.goToWritePage},{default:(0,r.w5)((()=>[(0,r.Uk)("글쓰기")])),_:1},8,["onClick"])]),(0,r.Wm)(d,{data:n.visitors,class:"table-responsive",style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{prop:"index",label:"번호",width:"80"},{default:(0,r.w5)((({$index:t})=>[(0,r.Uk)((0,g.zw)(s.calculateIndex(t)),1)])),_:1}),(0,r.Wm)(u,{label:"제목"},{default:(0,r.w5)((({row:t})=>[t.isPrivate?((0,r.wg)(),(0,r.iD)("span",rt,"🔒")):(0,r.kq)("",!0),(0,r._)("a",{onClick:(0,o.iM)((e=>s.handleClick(t)),["prevent"])},(0,g.zw)(t.title),9,it)])),_:1}),(0,r.Wm)(u,{prop:"user.name",label:"작성자",width:"100"}),(0,r.Wm)(u,{prop:"createdAt",label:"작성일",width:"150",formatter:s.formatDate},null,8,["formatter"]),(0,r.Wm)(u,{prop:"views",label:"조회수",width:"80"})])),_:1},8,["data"]),(0,r.Wm)(c,{"total-pages":n.meta.totalPages,"current-page":t.currentPage,onPageChanged:s.changePage},null,8,["total-pages","current-page","onPageChanged"])],64)}const st={class:"pagination"},lt=["disabled"],ut=["onClick"],dt=["disabled"];function ct(t,e,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",st,[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>n.prevPageRange&&n.prevPageRange(...t)),disabled:1===i.startPage},"Prev",8,lt),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.paginationButtons,(t=>((0,r.wg)(),(0,r.iD)("button",{key:t,onClick:e=>n.changePage(t),class:(0,g.C_)({active:a.currentPage===t})},(0,g.zw)(t),11,ut)))),128)),(0,r._)("button",{onClick:e[1]||(e[1]=(...t)=>n.nextPageRange&&n.nextPageRange(...t)),disabled:i.startPage+a.pageSize>a.totalPages}," Next ",8,dt)])}var pt={name:"PaginationButton",props:{totalPages:Number,currentPage:Number,pageSize:{type:Number,default:5}},data(){return{startPage:1}},computed:{paginationButtons(){const t=Math.min(this.startPage+this.pageSize-1,this.totalPages);return Array.from({length:t-this.startPage+1},((t,e)=>e+this.startPage))}},methods:{changePage(t){this.$emit("page-changed",t)},setStartPage(t){this.startPage=t},prevPageRange(){const t=Math.max(this.startPage-this.pageSize,1);t!==this.startPage&&(this.setStartPage(t),this.changePage(t))},nextPageRange(){const t=Math.min(this.startPage+this.pageSize,this.totalPages);t!==this.startPage&&(this.setStartPage(t),this.changePage(t))}}};const mt=(0,c.Z)(pt,[["render",ct],["__scopeId","data-v-4bea6718"]]);var gt=mt,ht={name:"PageVisitor",components:{Pagination:gt},data(){return{visitors:[],meta:{totalPages:0,currentPage:1,totalCount:0,status:""}}},methods:{async handleClick(t){if(t.isPrivate){const e=prompt("비밀번호를 입력하세요.");e&&await this.visitorPasswordCheck(t.id,e)}else{const e=this.getCookie(`visitorViewed_${t.id}`);e||(await this.visitorViewRequest(t.id),this.setCookie(`visitorViewed_${t.id}`,"viewed",1)),this.$router.push(`/visitor/${t.id}`)}},async visitorViewRequest(t){try{await u.Z.post(`https://www.w-life.store/api/view/visitor/${t}`)}catch(e){console.error("Error sending view request",e)}},async checkAdminStatus(){if(this.getCookie("authToken"))try{const t=await u.Z.get("https://www.w-life.store/api/user/userInfo",{withCredentials:!0});this.status=t.data.status}catch(t){console.log("미로그인 상태")}},async visitorPasswordCheck(t,e){try{await u.Z.post(`https://www.w-life.store/api/visitor/${t}/password`,{password:e}),this.visitorViewRequest(t),this.$router.push(`/visitor/${t}`)}catch(a){console.error("Error sending view request",a),alert("비밀번호가 틀렸습니다.")}},formatDate(t,e){const a=new Date(t[e.property]);return a.toLocaleDateString()},goToWritePage(){"user"===this.status?this.$router.push("/visitor/write"):alert("로그인을 해주세요.")},async fetchVisitors(t){try{const e=await u.Z.get(`https://www.w-life.store/api/visitor?page=${t}`);this.visitors=e.data.visitors,this.meta=e.data.meta,this.totalCount=e.data.meta.totalCount}catch(e){console.error("Error fetching visitors",e)}},changePage(t){this.currentPage=t,this.fetchVisitors(t),this.$router.push({path:this.$route.path,query:{page:t.toString()}})},calculateIndex(t){return this.totalCount-15*(this.currentPage-1)-t},setCookie(t,e,a){let o="";if(a){let t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3),o="; expires="+t.toUTCString()}document.cookie=t+"="+(e||"")+o+"; path=/"},getCookie(t){let e=t+"=",a=document.cookie.split(";");for(let o=0;o<a.length;o++){let t=a[o];while(" "===t.charAt(0))t=t.substring(1,t.length);if(0===t.indexOf(e))return t.substring(e.length,t.length)}return null}},watch:{"$route.query.page":function(t){this.currentPage=Number(t)||1,this.fetchVisitors(this.currentPage)}},created(){const t=this.$route.query.page||1;this.currentPage=Number(t),this.fetchVisitors(this.currentPage),this.checkAdminStatus()}};const wt=(0,c.Z)(ht,[["render",nt],["__scopeId","data-v-c9a300ce"]]);var ft=wt;const yt=t=>((0,r.dD)("data-v-2503319a"),t=t(),(0,r.Cn)(),t),vt={class:"visitor-title"},_t={class:"flex items-center"},bt={class:"flex items-center"},Ct={key:0,class:"visitor-content"},kt={key:1},Pt={class:"visitor-comments"},Wt=yt((()=>(0,r._)("h3",null,"댓글",-1)));function Vt(t,e,a,o,i,n){const s=(0,r.up)("el-tag"),l=(0,r.up)("el-button"),u=(0,r.up)("el-input"),d=(0,r.up)("el-page-header");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("span",vt,(0,g.zw)(i.title),1),(0,r.Wm)(d,{onBack:n.goBack,icon:t.ArrowLeft},{content:(0,r.w5)((()=>[(0,r._)("div",_t,[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Uk)("작성자")])),_:1}),(0,r._)("span",null,(0,g.zw)(i.author)+" | "+(0,g.zw)(i.createdAt),1)])])),extra:(0,r.w5)((()=>[(0,r._)("div",bt,[(0,r.Wm)(l,{type:"primary",class:"ml-2",onClick:n.editContent},{default:(0,r.w5)((()=>[(0,r.Uk)("Edit")])),_:1},8,["onClick"]),(0,r.Wm)(l,{type:"danger",class:"ml-2",onClick:n.deleteVisitor},{default:(0,r.w5)((()=>[(0,r.Uk)("delete")])),_:1},8,["onClick"])])])),default:(0,r.w5)((()=>[i.editing?((0,r.wg)(),(0,r.iD)("div",kt,[(0,r.Wm)(u,{type:"textarea",modelValue:i.editableContent,"onUpdate:modelValue":e[0]||(e[0]=t=>i.editableContent=t),rows:"4",placeholder:"Please input your content"},null,8,["modelValue"]),(0,r.Wm)(l,{type:"success",class:"edit-button",onClick:n.patchVisitor},{default:(0,r.w5)((()=>[(0,r.Uk)("Save")])),_:1},8,["onClick"])])):((0,r.wg)(),(0,r.iD)("div",Ct,(0,g.zw)(i.content),1)),(0,r._)("div",Pt,[Wt,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.visitorComments,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.name,class:"visitor-comment"},[(0,r._)("span",null,[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Uk)("admin")])),_:1}),(0,r.Uk)((0,g.zw)(t.name),1)]),(0,r._)("p",null,(0,g.zw)(t.comment),1)])))),128))])])),_:1},8,["onBack","icon"])],64)}var It={name:"PageVisitorDeatil",data(){return{title:"",content:"",author:"",createdAt:"",editing:!1,editableContent:"",visitorComments:[]}},methods:{goBack(){this.$router.go(-1)},editContent(){this.editableContent=this.content,this.editing=!0},async patchVisitor(){try{const t=this.$route.params.visitorId;await u.Z.patch(`https://www.w-life.store/api/visitor/${t}`,{content:this.editableContent},{withCredentials:!0}),this.content=this.editableContent,this.editing=!1,alert("방명록 수정 완료.")}catch(t){console.error("방명록 수정 서버에러",t),alert("방명록 수정 권한이 없습니다.")}this.content=this.editableContent,this.editing=!1},async deleteVisitor(){if(confirm("정말로 삭제하시겠습니까?"))try{const t=this.$route.params.visitorId;await u.Z.delete(`https://www.w-life.store/api/visitor/${t}`,{withCredentials:!0}),alert("방명록이 삭제되었습니다."),this.$router.go(-1)}catch(t){console.error("방명록 삭제 서버에러",t),alert("방명록 삭제에 실패했습니다.")}}},async created(){try{const t=this.$route.params.visitorId,e=await u.Z.get(`https://www.w-life.store/api/visitor/${t}`);this.visitorComments=e.data.visitorComments,this.title=e.data.title,this.content=e.data.content,this.author=e.data.user.name;const a=new Date(e.data.createdAt);this.createdAt=a.toLocaleDateString()}catch(t){console.error("Error fetching visitor detail",t)}}};const Ut=(0,c.Z)(It,[["render",Vt],["__scopeId","data-v-2503319a"]]);var $t=Ut;const Dt=t=>((0,r.dD)("data-v-99de128a"),t=t(),(0,r.Cn)(),t),xt=Dt((()=>(0,r._)("h2",null,"글쓰기",-1))),St=Dt((()=>(0,r._)("label",{for:""},"제목",-1))),Zt=Dt((()=>(0,r._)("label",{for:""},"방명록",-1))),At=Dt((()=>(0,r._)("label",{for:"text"},"비밀번호",-1))),qt=Dt((()=>(0,r._)("button",{type:"submit",class:"submit-button"},"작성",-1)));function zt(t,e,a,i,n,s){const l=(0,r.up)("el-input"),u=(0,r.up)("el-checkbox");return(0,r.wg)(),(0,r.iD)(r.HY,null,[xt,(0,r._)("form",{onSubmit:e[4]||(e[4]=(0,o.iM)(((...t)=>s.writeVisitor&&s.writeVisitor(...t)),["prevent"]))},[St,(0,r.Wm)(l,{modelValue:n.visitors.title,"onUpdate:modelValue":e[0]||(e[0]=t=>n.visitors.title=t),maxlength:"30",placeholder:"제목을 입력해주세요","show-word-limit":"",type:"text"},null,8,["modelValue"]),Zt,(0,r.Wm)(l,{modelValue:n.visitors.content,"onUpdate:modelValue":e[1]||(e[1]=t=>n.visitors.content=t),maxlength:"500",placeholder:"방명록을 입력해주세요","show-word-limit":"",type:"textarea",rows:10,autosize:{minRows:20,maxRows:200}},null,8,["modelValue"]),At,(0,r.Wm)(l,{modelValue:n.visitors.password,"onUpdate:modelValue":e[2]||(e[2]=t=>n.visitors.password=t),type:"text",placeholder:"비밀번호를 입력해주세요"},null,8,["modelValue"]),(0,r._)("div",null,[(0,r.Wm)(u,{modelValue:n.visitors.isPrivate,"onUpdate:modelValue":e[3]||(e[3]=t=>n.visitors.isPrivate=t)},{default:(0,r.w5)((()=>[(0,r.Uk)("비밀글")])),_:1},8,["modelValue"])]),qt],32)],64)}var Lt={name:"PageVisitorWrite",data(){return{visitors:{title:"",content:"",password:"",isPrivate:!1}}},methods:{async writeVisitor(){try{const t=await u.Z.post("https://www.w-life.store/api/visitor",this.visitors,{withCredentials:!0});201===t.status&&(alert("방명록 작성에 성공했습니다."),this.$router.push("/visitor"))}catch(t){let e="방명록 작성에 실패했습니다.";t.response&&t.response.data&&(e=Array.isArray(t.response.data.errorMessage)?t.response.data.errorMessage.join("\n"):t.response.data.errorMessage||e),alert(e),console.error(t,"알 수 없는 에러 발생")}}}};const Bt=(0,c.Z)(Lt,[["render",zt],["__scopeId","data-v-99de128a"]]);var Tt=Bt;const Mt=t=>((0,r.dD)("data-v-4fda1070"),t=t(),(0,r.Cn)(),t),Rt={class:"account-box"},jt=Mt((()=>(0,r._)("h2",null,"유저 정보",-1)));function Ht(t,e,a,o,i,n){const s=(0,r.up)("el-tag"),l=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)("div",Rt,[jt,(0,r._)("span",null,[(0,r.Uk)("name: "+(0,g.zw)(i.name),1),(0,r.Wm)(s,{class:"ml-4",type:"warning"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,g.zw)(i.status),1)])),_:1})]),(0,r._)("span",null,"email: "+(0,g.zw)(i.email),1),"admin"===i.status?((0,r.wg)(),(0,r.j4)(l,{key:0,type:"primary",onClick:n.goToAdminPage},{default:(0,r.w5)((()=>[(0,r.Uk)("관리자 페이지")])),_:1},8,["onClick"])):(0,r.kq)("",!0)])}var Et={name:"PageAccount",data(){return{name:"",email:"",status:""}},methods:{goToAdminPage(){this.$router.push("/admin")}},async created(){try{const t=await u.Z.get("https://www.w-life.store/api/user/userInfo",{withCredentials:!0});this.name=t.data.name,this.email=t.data.email,this.status=t.data.status}catch(t){console.error("Error fetching visitor detail",t)}}};const Ot=(0,c.Z)(Et,[["render",Ht],["__scopeId","data-v-4fda1070"]]);var Ft=Ot;const Nt=t=>((0,r.dD)("data-v-a619455e"),t=t(),(0,r.Cn)(),t),Yt={class:"admin-box"},Kt={class:"adminTitle"},Gt=Nt((()=>(0,r._)("div",{class:"adminTitle"},[(0,r._)("h3",null,"카테고리 생성")],-1))),Jt=Nt((()=>(0,r._)("br",null,null,-1))),Qt=Nt((()=>(0,r._)("div",{class:"adminTitle"},[(0,r._)("h3",null,"서브 카테고리 생성")],-1)));function Xt(t,e,a,i,n,s){const l=(0,r.up)("el-tag"),u=(0,r.up)("el-input"),d=(0,r.up)("el-form-item"),c=(0,r.up)("el-input-number"),p=(0,r.up)("el-button"),m=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",Yt,[(0,r._)("div",Kt,[(0,r._)("h2",null,[(0,r.Uk)("관리자 페이지 "),(0,r.Wm)(l,{type:"warning"},{default:(0,r.w5)((()=>[(0,r.Uk)("admin")])),_:1})])]),Gt,(0,r.Wm)(m,{onSubmit:(0,o.iM)(s.createCategory,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{label:"카테고리 이름"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:n.categoryForm.name,"onUpdate:modelValue":e[0]||(e[0]=t=>n.categoryForm.name=t),placeholder:"카테고리 이름"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"카테고리 위치"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:n.categoryForm.position,"onUpdate:modelValue":e[1]||(e[1]=t=>n.categoryForm.position=t),min:1,placeholder:"위치"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{class:"admin-form-button"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"primary","native-type":"submit"},{default:(0,r.w5)((()=>[(0,r.Uk)("카테고리 생성")])),_:1})])),_:1})])),_:1},8,["onSubmit"]),Jt,Qt,(0,r.Wm)(m,{onSubmit:(0,o.iM)(s.createSubCategory,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{label:"카테고리 이름"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:n.subCategoryForm.categoryName,"onUpdate:modelValue":e[2]||(e[2]=t=>n.subCategoryForm.categoryName=t),placeholder:"카테고리 이름"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"서브카테고리 이름"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:n.subCategoryForm.name,"onUpdate:modelValue":e[3]||(e[3]=t=>n.subCategoryForm.name=t),placeholder:"서브카테고리 이름"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"서브카테고리 위치"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:n.subCategoryForm.position,"onUpdate:modelValue":e[4]||(e[4]=t=>n.subCategoryForm.position=t),min:1,placeholder:"위치"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"primary","native-type":"submit"},{default:(0,r.w5)((()=>[(0,r.Uk)("서브카테고리 생성")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])}var te={name:"PageAdmin",data(){return{categoryForm:{name:"",position:1},subCategoryForm:{categoryName:"",name:"",position:1}}},methods:{async createCategory(){try{await u.Z.post("https://www.w-life.store/api/category",this.categoryForm,{withCredentials:!0}),alert("카테고리가 생성되었습니다.")}catch(t){alert("카테고리 생성 실패"),console.error("카테고리 생성 실패",t)}},async createSubCategory(){try{await u.Z.post("https://www.w-life.store/api/subCategory",this.subCategoryForm,{withCredentials:!0}),alert("서브카테고리가 생성되었습니다.")}catch(t){alert("서브카테고리 생성 실패"),console.error("서브카테고리 생성 실패",t)}}}};const ee=(0,c.Z)(te,[["render",Xt],["__scopeId","data-v-a619455e"]]);var ae=ee;const oe={class:"boardTitle"};function re(t,e,a,o,i,n){const s=(0,r.up)("el-button"),l=(0,r.up)("el-table-column"),u=(0,r.up)("router-link"),d=(0,r.up)("el-table"),c=(0,r.up)("Pagination");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",oe,[(0,r._)("h2",null,(0,g.zw)(i.subCategoryName),1),(0,r.Wm)(s,{type:"primary",onClick:n.goToWritePage},{default:(0,r.w5)((()=>[(0,r.Uk)("글쓰기")])),_:1},8,["onClick"])]),(0,r.Wm)(d,{data:i.posts,class:"table-responsive",style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{prop:"index",label:"번호",width:"80"},{default:(0,r.w5)((({$index:t})=>[(0,r.Uk)((0,g.zw)(n.calculateIndex(t)),1)])),_:1}),(0,r.Wm)(l,{label:"제목"},{default:(0,r.w5)((({row:t})=>[(0,r.Wm)(u,{to:`/post/${t.id}`,onClick:e=>n.BoardViewRequest(t.id)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,g.zw)(t.title),1)])),_:2},1032,["to","onClick"])])),_:1}),(0,r.Wm)(l,{prop:"user.name",label:"작성자",width:"100"}),(0,r.Wm)(l,{prop:"createdAt",label:"작성일",width:"150",formatter:n.formatDate},null,8,["formatter"]),(0,r.Wm)(l,{prop:"views",label:"조회수",width:"80"})])),_:1},8,["data"]),(0,r.Wm)(c,{"total-pages":i.meta.totalPages,"current-page":t.currentPage,onPageChanged:n.changePage},null,8,["total-pages","current-page","onPageChanged"])],64)}var ie={name:"pageBoard",components:{Pagination:gt},data(){return{posts:[],meta:{totalPages:0,currentPage:1,totalCount:0,pageSize:15},subCategoryName:"",status:""}},created(){const t=this.$route.query.page||1;this.currentPage=Number(t),this.fetchPosts(this.$route.params.subCategoryId),this.checkAdminStatus()},watch:{"$route.params.subCategoryId":{immediate:!0,handler(t){t&&this.fetchPosts(t)}},"$route.query.page":function(t){this.currentPage=Number(t)||1,this.$route.params.subCategoryId&&this.fetchPosts(this.$route.params.subCategoryId)}},methods:{async fetchPosts(t){try{if(!t)return;const e=this.$route.query.page||1,a=await u.Z.get(`https://www.w-life.store/api/post?page=${e}&subCategoryId=${t}`);this.subCategoryName=a.data.subCategory.name,this.posts=a.data.posts,this.meta=a.data.meta,this.totalCount=a.data.meta.totalCount}catch(e){console.error("Error fetching posts",e)}},async checkAdminStatus(){if(this.getCookie("Authorization"))try{const t=await u.Z.get("https://www.w-life.store/api/user/userInfo",{withCredentials:!0});console.log(this.status),this.status=t.data.status}catch(t){console.log("미로그인 상태")}},async BoardViewRequest(t){const e=this.getCookie(`postViewed_${t}`);if(!e)try{await u.Z.post(`https://www.w-life.store/api/view/post/${t}`),this.setCookie(`postViewed_${t}`,"viewed",1)}catch(a){console.error("Error sending view request",a)}},formatDate(t,e){const a=new Date(t[e.property]);return a.toLocaleDateString()},goToWritePage(){if("admin"!==this.status)return void alert("권한이 없습니다.");const t=this.$route.params.subCategoryId;this.$router.push({path:"/board/write",query:{subCategoryId:t}})},changePage(t){this.currentPage=t,this.fetchPosts(this.$route.params.subCategoryId),this.$router.push({path:this.$route.path,query:{page:t.toString()}})},calculateIndex(t){return this.totalCount-15*(this.currentPage-1)-t},setCookie(t,e,a){let o="";if(a){let t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3),o="; expires="+t.toUTCString()}document.cookie=t+"="+(e||"")+o+"; path=/"},getCookie(t){let e=t+"=",a=document.cookie.split(";");for(let o=0;o<a.length;o++){let t=a[o];while(" "===t.charAt(0))t=t.substring(1,t.length);if(0===t.indexOf(e))return t.substring(e.length,t.length)}return null}}};const ne=(0,c.Z)(ie,[["render",re],["__scopeId","data-v-71943e58"]]);var se=ne;const le={class:"board-title"},ue={class:"flex items-center"},de={class:"flex items-center"},ce={key:0,class:"board-content"},pe={key:1};function me(t,e,a,o,i,n){const s=(0,r.up)("el-tag"),l=(0,r.up)("el-button"),u=(0,r.up)("el-input"),d=(0,r.up)("el-page-header");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("span",le,(0,g.zw)(i.title),1),(0,r.Wm)(d,{onBack:n.goBack,icon:t.ArrowLeft},{content:(0,r.w5)((()=>[(0,r._)("div",ue,[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Uk)("작성자")])),_:1}),(0,r._)("span",null,(0,g.zw)(i.author)+" | "+(0,g.zw)(i.createdAt),1)])])),extra:(0,r.w5)((()=>[(0,r._)("div",de,[(0,r.Wm)(l,{type:"primary",class:"ml-2",onClick:n.editContent},{default:(0,r.w5)((()=>[(0,r.Uk)("Edit")])),_:1},8,["onClick"]),(0,r.Wm)(l,{type:"danger",class:"ml-2",onClick:n.deletePost},{default:(0,r.w5)((()=>[(0,r.Uk)("delete")])),_:1},8,["onClick"])])])),default:(0,r.w5)((()=>[i.editing?((0,r.wg)(),(0,r.iD)("div",pe,[(0,r.Wm)(u,{type:"textarea",modelValue:i.editableContent,"onUpdate:modelValue":e[0]||(e[0]=t=>i.editableContent=t),rows:"4",placeholder:"Please input your content"},null,8,["modelValue"]),(0,r.Wm)(l,{type:"success",onClick:n.patchPost,class:"edit-button-board"},{default:(0,r.w5)((()=>[(0,r.Uk)("Save")])),_:1},8,["onClick"])])):((0,r.wg)(),(0,r.iD)("div",ce,(0,g.zw)(i.content),1))])),_:1},8,["onBack","icon"])],64)}var ge={name:"PageVisitorDeatil",data(){return{title:"",content:"",author:"",createdAt:"",editing:!1,editableContent:""}},methods:{goBack(){this.$router.go(-1)},editContent(){this.editableContent=this.content,this.editing=!0},async patchPost(){try{const t=this.$route.params.postId;await u.Z.patch(`https://www.w-life.store/api/post/${t}`,{content:this.editableContent},{withCredentials:!0}),this.content=this.editableContent,this.editing=!1,alert("게시글 수정 완료.")}catch(t){console.error("게시글 수정 서버에러",t),alert("게시글 수정 권한이 없습니다.")}this.content=this.editableContent,this.editing=!1},async deletePost(){if(confirm("정말로 삭제하시겠습니까?"))try{const t=this.$route.params.postId;await u.Z.delete(`https://www.w-life.store/api/post/${t}`,{withCredentials:!0}),alert("게시글이 삭제되었습니다."),this.$router.go(-1)}catch(t){console.error("Error deleting visitor",t),alert("게시글 삭제에 실패했습니다.")}}},async created(){try{const t=this.$route.params.postId,e=await u.Z.get(`https://www.w-life.store/api/post/${t}`);this.title=e.data.title,this.content=e.data.content;const a=new Date(e.data.createdAt);this.createdAt=a.toLocaleDateString(),this.author=e.data.user.name}catch(t){console.error("Error fetching visitor detail",t)}}};const he=(0,c.Z)(ge,[["render",me],["__scopeId","data-v-5a9ea6e0"]]);var we=he;const fe=t=>((0,r.dD)("data-v-feffdcce"),t=t(),(0,r.Cn)(),t),ye=fe((()=>(0,r._)("h2",null,"글쓰기",-1))),ve=fe((()=>(0,r._)("label",{for:""},"제목",-1))),_e=fe((()=>(0,r._)("label",{for:""},"내용",-1))),be=fe((()=>(0,r._)("button",{type:"submit",class:"submit-button"},"작성",-1)));function Ce(t,e,a,i,n,s){const l=(0,r.up)("el-input");return(0,r.wg)(),(0,r.iD)(r.HY,null,[ye,(0,r._)("form",{onSubmit:e[2]||(e[2]=(0,o.iM)(((...t)=>s.writeBoard&&s.writeBoard(...t)),["prevent"]))},[ve,(0,r.Wm)(l,{modelValue:n.boards.title,"onUpdate:modelValue":e[0]||(e[0]=t=>n.boards.title=t),maxlength:"50",placeholder:"제목을 입력해주세요","show-word-limit":"",type:"text"},null,8,["modelValue"]),_e,(0,r.Wm)(l,{modelValue:n.boards.content,"onUpdate:modelValue":e[1]||(e[1]=t=>n.boards.content=t),maxlength:"2000",placeholder:"내용을 입력해주세요","show-word-limit":"",type:"textarea",rows:10,autosize:{minRows:20,maxRows:200}},null,8,["modelValue"]),be],32)],64)}var ke={name:"PageVisitorWrite",data(){return{boards:{title:"",content:"",subCategoryId:""}}},created(){this.boards.subCategoryId=this.$route.query.subCategoryId},methods:{async writeBoard(){try{const t=await u.Z.post("https://www.w-life.store/api/post",this.boards,{withCredentials:!0});201===t.status&&(alert("게시글 작성에 성공했습니다."),this.$router.go(-1))}catch(t){let e="게시글 작성에 실패했습니다.";t.response&&t.response.data&&(e=Array.isArray(t.response.data.errorMessage)?t.response.data.errorMessage.join("\n"):t.response.data.errorMessage||e),alert(e),console.error(t,"알 수 없는 에러 발생")}}}};const Pe=(0,c.Z)(ke,[["render",Ce],["__scopeId","data-v-feffdcce"]]);var We=Pe;const Ve=[{path:"/",name:"Home",component:M},{path:"/home",name:"home",component:M},{path:"/login",name:"Login",component:N},{path:"/register",name:"Register",component:tt},{path:"/visitor",name:"visitor",component:ft},{path:"/visitor/:visitorId",name:"PageVisitorDeatil",component:$t},{path:"/visitor/write",name:"PageVisitorWrite",component:Tt},{path:"/account",name:"PageAccount",component:Ft},{path:"/admin",name:"PageAdmin",component:ae},{path:"/subCategory/:subCategoryId",name:"PageBoard",component:se},{path:"/post/:postId",name:"PageBoardDetail",component:we},{path:"/board/write",name:"PageBoardWrite",component:We}],Ie=(0,C.p7)({history:(0,C.PO)(),routes:Ve});var Ue=Ie,$e=a(3056),De=(a(4415),a(65)),xe=(0,De.MT)({state(){return{isLoggedIn:!1}},mutations:{setLoggedIn(t,e){t.isLoggedIn=e}},actions:{login({commit:t}){t("setLoggedIn",!0)},logout({commit:t}){t("setLoggedIn",!1)}}}),Se=a(2748);const Ze=(0,o.ri)(b);Ze.use($e.Z),Ze.use(Ue),Ze.use(xe);for(const[Ae,qe]of Object.entries(Se))Ze.component(Ae,qe);Ze.mount("#app")}},e={};function a(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,o,r,i){if(!o){var n=1/0;for(d=0;d<t.length;d++){o=t[d][0],r=t[d][1],i=t[d][2];for(var s=!0,l=0;l<o.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(t){return a.O[t](o[l])}))?o.splice(l--,1):(s=!1,i<n&&(n=i));if(s){t.splice(d--,1);var u=r();void 0!==u&&(e=u)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,n=o[0],s=o[1],l=o[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var d=l(a)}for(e&&e(o);u<n.length;u++)i=n[u],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},o=self["webpackChunkmyblog_frontend"]=self["webpackChunkmyblog_frontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(1943)}));o=a.O(o)})();
//# sourceMappingURL=app.72d194ed.js.map